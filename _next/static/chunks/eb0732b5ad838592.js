(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99291,e=>{"use strict";var t=e.i(61822),r=e.i(93550);let o=()=>{let e=localStorage.getItem("expiresAt");return!e||Date.now()>=parseInt(e,10)?(localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,r.clearAuth)()),null):localStorage.getItem("authToken")};e.s(["tokenApi",0,{async get(e){let a=o(),i=await fetch(`/api${e}`,{headers:{...a&&{Authorization:`Bearer ${a}`}}});if(401===i.status)throw localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,r.clearAuth)()),Error("Unauthorized");if(!i.ok)throw Error(`GET ${e} failed`);return i.json()},async post(e,a){let i=o(),l=await fetch(`/api${e}`,{method:"POST",headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}},body:JSON.stringify(a)});if(401===l.status)throw localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,r.clearAuth)()),Error("Unauthorized");if(!l.ok)throw Error(`POST ${e} failed`);return l.json()},async put(e,a){let i=o(),l=await fetch(`/api${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}},body:JSON.stringify(a)});if(401===l.status)throw localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,r.clearAuth)()),Error("Unauthorized");if(!l.ok)throw Error(`PUT ${e} failed`);return l.json()},async delete(e){let a=o(),i=await fetch(`/api${e}`,{method:"DELETE",headers:{...a&&{Authorization:`Bearer ${a}`}}});if(401===i.status)throw localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,r.clearAuth)()),Error("Unauthorized");if(!i.ok)throw Error(`DELETE ${e} failed`);return i.status}}])}]);