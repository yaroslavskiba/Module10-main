(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89610,e=>{e.v({error:"style-module__yHROZW__error",notification:"style-module__yHROZW__notification",notificationClose:"style-module__yHROZW__notificationClose",notificationContent:"style-module__yHROZW__notificationContent",notificationIcon:"style-module__yHROZW__notificationIcon",notificationMessage:"style-module__yHROZW__notificationMessage",slideIn:"style-module__yHROZW__slideIn",slideOut:"style-module__yHROZW__slideOut",success:"style-module__yHROZW__success",warning:"style-module__yHROZW__warning"})},45618,e=>{"use strict";var t=e.i(43476),s=e.i(88014),r=e.i(71645),i=e.i(74080),a=e.i(89610);let n=({message:e,type:s,isVisible:n=!1,close:o,autoHide:l})=>{let[u,c]=(0,r.useState)(!1);(0,r.useEffect)(()=>{n&&c(!1)},[n]),(0,r.useEffect)(()=>{if(!n)return;let e=setTimeout(()=>{h()},l);return()=>clearTimeout(e)},[n,u,l]);let h=()=>{u||(c(!0),setTimeout(()=>{o()},300))};if(!n&&!u)return null;let d="success"===s?a.default.success:"error"===s?a.default.error:a.default.warning,p=u?a.default.slideOut:a.default.slideIn,m=(0,t.jsx)("div",{"data-testid":"notification",className:`${a.default.notification} ${d} ${p}`,children:(0,t.jsxs)("div",{className:a.default.notificationContent,children:[(0,t.jsx)("p",{className:a.default.notificationMessage,children:e}),(0,t.jsx)("button",{"data-testid":"close-button",className:a.default.notificationClose,onClick:h,children:"×"})]})}),f=document.getElementById("notification-root");return f?(0,i.createPortal)(m,f):null},o=null,l=null,u=[],c=()=>{let e=(o||((o=document.createElement("div")).id="notification-container",document.getElementById("notification-root")?.appendChild(o)),o);l||(l=(0,s.createRoot)(e)),l.render((0,t.jsx)(t.Fragment,{children:u.map(e=>(0,t.jsx)(n,{message:e.message,type:e.type,isVisible:!0,autoHide:e.autoHide,close:()=>{u=u.filter(t=>t.id!==e.id),c()}},e.id))}))};e.s(["showNotification",0,(e,t,s)=>{let r=Date.now(),i=s+100*u.length;return u.push({id:r,message:e,type:t,autoHide:i}),c(),()=>{u=u.filter(e=>e.id!==r),c()}}],45618)},93016,e=>{"use strict";var t=e.i(10348);e.s(["Important",()=>t.default])},71464,e=>{"use strict";var t=e.i(15849);e.s(["Envelope",()=>t.default])},99291,e=>{"use strict";var t=e.i(61822),s=e.i(93550);let r=()=>{let e=localStorage.getItem("expiresAt");return!e||Date.now()>=parseInt(e,10)?(localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,s.clearAuth)()),null):localStorage.getItem("authToken")};e.s(["tokenApi",0,{async get(e){let i=r(),a=await fetch(`/api${e}`,{headers:{...i&&{Authorization:`Bearer ${i}`}}});if(401===a.status)throw localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,s.clearAuth)()),Error("Unauthorized");if(!a.ok)throw Error(`GET ${e} failed`);return a.json()},async post(e,i){let a=r(),n=await fetch(`/api${e}`,{method:"POST",headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}},body:JSON.stringify(i)});if(401===n.status)throw localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,s.clearAuth)()),Error("Unauthorized");if(!n.ok)throw Error(`POST ${e} failed`);return n.json()},async put(e,i){let a=r(),n=await fetch(`/api${e}`,{method:"PUT",headers:{"Content-Type":"application/json",...a&&{Authorization:`Bearer ${a}`}},body:JSON.stringify(i)});if(401===n.status)throw localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,s.clearAuth)()),Error("Unauthorized");if(!n.ok)throw Error(`PUT ${e} failed`);return n.json()},async delete(e){let i=r(),a=await fetch(`/api${e}`,{method:"DELETE",headers:{...i&&{Authorization:`Bearer ${i}`}}});if(401===a.status)throw localStorage.removeItem("currentUser"),localStorage.removeItem("authToken"),localStorage.removeItem("expiresAt"),t.store.dispatch((0,s.clearAuth)()),Error("Unauthorized");if(!a.ok)throw Error(`DELETE ${e} failed`);return a.status}}])},14463,e=>{"use strict";var t=e.i(84129);e.s(["Pencil",()=>t.default])},54616,e=>{"use strict";var t=e.i(71645),s=e.i(14272),r=e.i(40143),i=e.i(15823),a=e.i(19273),n=class extends i.Subscribable{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#i()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,a.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,a.hashKey)(t.mutationKey)!==(0,a.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#i(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#i(),this.#a()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#i(){let e=this.#s?.state??(0,s.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){r.notifyManager.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s,r),this.#r.onSettled?.(e.data,null,t,s,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s,r),this.#r.onSettled?.(void 0,e.error,t,s,r))}this.listeners.forEach(e=>{e(this.#t)})})}},o=e.i(12598);function l(e,s){let i=(0,o.useQueryClient)(s),[l]=t.useState(()=>new n(i,e));t.useEffect(()=>{l.setOptions(e)},[l,e]);let u=t.useSyncExternalStore(t.useCallback(e=>l.subscribe(r.notifyManager.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),c=t.useCallback((e,t)=>{l.mutate(e,t).catch(a.noop)},[l]);if(u.error&&(0,a.shouldThrowError)(l.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:c,mutateAsync:u.mutate}}e.s(["useMutation",()=>l],54616)},72639,e=>{"use strict";var t=e.i(43476);e.i(85269);var s=e.i(22831),r=e.i(55487);e.s(["default",0,e=>i=>{let{t:a}=(0,s.useTranslation)(),{user:n,userAuth:o}=(0,r.useSelector)(e=>e.auth);return(0,t.jsx)(e,{...i,t:a,user:n,userAuth:o})}])},66027,e=>{"use strict";let t;var s=e.i(75555),r=e.i(40143),i=e.i(86491),a=e.i(15823),n=e.i(93803),o=e.i(19273),l=e.i(80166),u=class extends a.Subscribable{constructor(e,t){super(),this.options=t,this.#e=e,this.#n=null,this.#o=(0,n.pendingThenable)(),this.bindMethods(),this.setOptions(t)}#e;#l=void 0;#u=void 0;#t=void 0;#c;#h;#o;#n;#d;#p;#m;#f;#y;#v;#g=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#l.addObserver(this),c(this.#l,this.options)?this.#b():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return h(this.#l,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return h(this.#l,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#R(),this.#j(),this.#l.removeObserver(this)}setOptions(e){let t=this.options,s=this.#l;if(this.options=this.#e.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof(0,o.resolveEnabled)(this.options.enabled,this.#l))throw Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#l.setOptions(this.options),t._defaulted&&!(0,o.shallowEqualObjects)(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#l,observer:this});let r=this.hasListeners();r&&d(this.#l,s,this.options,t)&&this.#b(),this.updateResult(),r&&(this.#l!==s||(0,o.resolveEnabled)(this.options.enabled,this.#l)!==(0,o.resolveEnabled)(t.enabled,this.#l)||(0,o.resolveStaleTime)(this.options.staleTime,this.#l)!==(0,o.resolveStaleTime)(t.staleTime,this.#l))&&this.#T();let i=this.#_();r&&(this.#l!==s||(0,o.resolveEnabled)(this.options.enabled,this.#l)!==(0,o.resolveEnabled)(t.enabled,this.#l)||i!==this.#v)&&this.#I(i)}getOptimisticResult(e){var t,s;let r=this.#e.getQueryCache().build(this.#e,e),i=this.createResult(r,e);return t=this,s=i,(0,o.shallowEqualObjects)(t.getCurrentResult(),s)||(this.#t=i,this.#h=this.options,this.#c=this.#l.state),i}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),t?.(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#o.status||this.#o.reject(Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){this.#g.add(e)}getCurrentQuery(){return this.#l}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){let t=this.#e.defaultQueryOptions(e),s=this.#e.getQueryCache().build(this.#e,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#b({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#b(e){this.#S();let t=this.#l.fetch(this.options,e);return e?.throwOnError||(t=t.catch(o.noop)),t}#T(){this.#R();let e=(0,o.resolveStaleTime)(this.options.staleTime,this.#l);if(o.isServer||this.#t.isStale||!(0,o.isValidTimeout)(e))return;let t=(0,o.timeUntilStale)(this.#t.dataUpdatedAt,e);this.#f=l.timeoutManager.setTimeout(()=>{this.#t.isStale||this.updateResult()},t+1)}#_(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#l):this.options.refetchInterval)??!1}#I(e){this.#j(),this.#v=e,!o.isServer&&!1!==(0,o.resolveEnabled)(this.options.enabled,this.#l)&&(0,o.isValidTimeout)(this.#v)&&0!==this.#v&&(this.#y=l.timeoutManager.setInterval(()=>{(this.options.refetchIntervalInBackground||s.focusManager.isFocused())&&this.#b()},this.#v))}#x(){this.#T(),this.#I(this.#_())}#R(){this.#f&&(l.timeoutManager.clearTimeout(this.#f),this.#f=void 0)}#j(){this.#y&&(l.timeoutManager.clearInterval(this.#y),this.#y=void 0)}createResult(e,t){let s,r=this.#l,a=this.options,l=this.#t,u=this.#c,h=this.#h,m=e!==r?e.state:this.#u,{state:f}=e,y={...f},v=!1;if(t._optimisticResults){let s=this.hasListeners(),n=!s&&c(e,t),o=s&&d(e,r,t,a);(n||o)&&(y={...y,...(0,i.fetchState)(f.data,e.options)}),"isRestoring"===t._optimisticResults&&(y.fetchStatus="idle")}let{error:g,errorUpdatedAt:b,status:x}=y;s=y.data;let R=!1;if(void 0!==t.placeholderData&&void 0===s&&"pending"===x){let e;l?.isPlaceholderData&&t.placeholderData===h?.placeholderData?(e=l.data,R=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#m?.state.data,this.#m):t.placeholderData,void 0!==e&&(x="success",s=(0,o.replaceData)(l?.data,e,t),v=!0)}if(t.select&&void 0!==s&&!R)if(l&&s===u?.data&&t.select===this.#d)s=this.#p;else try{this.#d=t.select,s=t.select(s),s=(0,o.replaceData)(l?.data,s,t),this.#p=s,this.#n=null}catch(e){this.#n=e}this.#n&&(g=this.#n,s=this.#p,b=Date.now(),x="error");let j="fetching"===y.fetchStatus,S="pending"===x,T="error"===x,_=S&&j,I=void 0!==s,O={status:x,fetchStatus:y.fetchStatus,isPending:S,isSuccess:"success"===x,isError:T,isInitialLoading:_,isLoading:_,data:s,dataUpdatedAt:y.dataUpdatedAt,error:g,errorUpdatedAt:b,failureCount:y.fetchFailureCount,failureReason:y.fetchFailureReason,errorUpdateCount:y.errorUpdateCount,isFetched:y.dataUpdateCount>0||y.errorUpdateCount>0,isFetchedAfterMount:y.dataUpdateCount>m.dataUpdateCount||y.errorUpdateCount>m.errorUpdateCount,isFetching:j,isRefetching:j&&!S,isLoadingError:T&&!I,isPaused:"paused"===y.fetchStatus,isPlaceholderData:v,isRefetchError:T&&I,isStale:p(e,t),refetch:this.refetch,promise:this.#o,isEnabled:!1!==(0,o.resolveEnabled)(t.enabled,e)};if(this.options.experimental_prefetchInRender){let t=e=>{"error"===O.status?e.reject(O.error):void 0!==O.data&&e.resolve(O.data)},s=()=>{t(this.#o=O.promise=(0,n.pendingThenable)())},i=this.#o;switch(i.status){case"pending":e.queryHash===r.queryHash&&t(i);break;case"fulfilled":("error"===O.status||O.data!==i.value)&&s();break;case"rejected":("error"!==O.status||O.error!==i.reason)&&s()}}return O}updateResult(){let e=this.#t,t=this.createResult(this.#l,this.options);if(this.#c=this.#l.state,this.#h=this.options,void 0!==this.#c.data&&(this.#m=this.#l),(0,o.shallowEqualObjects)(t,e))return;this.#t=t;let s=()=>{if(!e)return!0;let{notifyOnChangeProps:t}=this.options,s="function"==typeof t?t():t;if("all"===s||!s&&!this.#g.size)return!0;let r=new Set(s??this.#g);return this.options.throwOnError&&r.add("error"),Object.keys(this.#t).some(t=>this.#t[t]!==e[t]&&r.has(t))};this.#a({listeners:s()})}#S(){let e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#l)return;let t=this.#l;this.#l=e,this.#u=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#a(e){r.notifyManager.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#t)}),this.#e.getQueryCache().notify({query:this.#l,type:"observerResultsUpdated"})})}};function c(e,t){return!1!==(0,o.resolveEnabled)(t.enabled,e)&&void 0===e.state.data&&("error"!==e.state.status||!1!==t.retryOnMount)||void 0!==e.state.data&&h(e,t,t.refetchOnMount)}function h(e,t,s){if(!1!==(0,o.resolveEnabled)(t.enabled,e)&&"static"!==(0,o.resolveStaleTime)(t.staleTime,e)){let r="function"==typeof s?s(e):s;return"always"===r||!1!==r&&p(e,t)}return!1}function d(e,t,s,r){return(e!==t||!1===(0,o.resolveEnabled)(r.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&p(e,s)}function p(e,t){return!1!==(0,o.resolveEnabled)(t.enabled,e)&&e.isStaleByTime((0,o.resolveStaleTime)(t.staleTime,e))}e.i(47167);var m=e.i(71645),f=e.i(12598);e.i(43476);var y=m.createContext((t=!1,{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t})),v=m.createContext(!1);v.Provider;var g=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function b(e,t){return function(e,t,s){let i=m.useContext(v),a=m.useContext(y),n=(0,f.useQueryClient)(s),l=n.defaultQueryOptions(e);if(n.getDefaultOptions().queries?._experimental_beforeQuery?.(l),l._optimisticResults=i?"isRestoring":"optimistic",l.suspense){let e=e=>"static"===e?e:Math.max(e??1e3,1e3),t=l.staleTime;l.staleTime="function"==typeof t?(...s)=>e(t(...s)):e(t),"number"==typeof l.gcTime&&(l.gcTime=Math.max(l.gcTime,1e3))}(l.suspense||l.throwOnError||l.experimental_prefetchInRender)&&!a.isReset()&&(l.retryOnMount=!1),m.useEffect(()=>{a.clearReset()},[a]);let u=!n.getQueryCache().get(l.queryHash),[c]=m.useState(()=>new t(n,l)),h=c.getOptimisticResult(l),d=!i&&!1!==e.subscribed;if(m.useSyncExternalStore(m.useCallback(e=>{let t=d?c.subscribe(r.notifyManager.batchCalls(e)):o.noop;return c.updateResult(),t},[c,d]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m.useEffect(()=>{c.setOptions(l)},[l,c]),l?.suspense&&h.isPending)throw g(l,c,a);if((({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&void 0===e.data||(0,o.shouldThrowError)(s,[e.error,r])))({result:h,errorResetBoundary:a,throwOnError:l.throwOnError,query:n.getQueryCache().get(l.queryHash),suspense:l.suspense}))throw h.error;if(n.getDefaultOptions().queries?._experimental_afterQuery?.(l,h),l.experimental_prefetchInRender&&!o.isServer&&h.isLoading&&h.isFetching&&!i){let e=u?g(l,c,a):n.getQueryCache().get(l.queryHash)?.promise;e?.catch(o.noop).finally(()=>{c.updateResult()})}return l.notifyOnChangeProps?h:c.trackResult(h)}(e,u,t)}e.s(["useQuery",()=>b],66027)},19775,e=>{e.v({avatar:"style-module__5JMVjG__avatar",community:"style-module__5JMVjG__community",communityInfo:"style-module__5JMVjG__communityInfo",person:"style-module__5JMVjG__person",personalInfo:"style-module__5JMVjG__personalInfo",recCommunities:"style-module__5JMVjG__recCommunities",recPeople:"style-module__5JMVjG__recPeople",sidebar:"style-module__5JMVjG__sidebar"})},52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(43289);e.i(85269);var i=e.i(22831),a=e.i(45618);e.i(96991);var n=e.i(71464),o=e.i(93016),l=e.i(14463),u=e.i(33142),u=u,c=e.i(54616),h=e.i(99683),d=e.i(80202),p=e.i(53145),m=e.i(99291);let f=({close:e,postCreated:f})=>{let{theme:y}=(0,r.useTheme)(),[v,g]=(0,s.useState)(null),[b,x]=(0,s.useState)(!1),[R,j]=(0,s.useState)(!1),{t:S}=(0,i.useTranslation)(),{handleSubmit:T,register:_,reset:I,formState:{errors:O,isSubmitting:E},watch:C}=(0,p.useForm)({mode:"onChange",resolver:(0,d.yupResolver)(h.object({title:h.string().required(S("inputPostTitle")).max(100,S("maxTitleLength")),description:h.string().required(S("inputPostDesc")).max(200,S("maxDescLength"))})),defaultValues:{title:"",description:""}}),Q=async e=>await m.tokenApi.post("/posts",{title:e.title,content:e.description}),{mutate:w}=(0,c.useMutation)({mutationFn:Q,onSuccess:()=>{(0,a.showNotification)(S("postCreated"),"success",3e3),f(),I(),g(null),e()},onError:()=>{(0,a.showNotification)(S("postNotCreated"),"error",3e3)}});return(0,t.jsx)("div",{className:"blur","data-theme":y,children:(0,t.jsxs)("div",{className:"form-container",children:[(0,t.jsxs)("div",{className:"form-header",children:[(0,t.jsx)("h2",{children:S("createNewPost")}),(0,t.jsx)("button",{"data-testid":"close-form-btn",className:"close-form-button",onClick:e,children:"×"})]}),(0,t.jsxs)("form",{id:"add-post",onSubmit:T(e=>{w(e)},e=>{Object.values(e).forEach(e=>{e?.message&&(0,a.showNotification)(e.message.toString(),"error",3e3)})}),children:[(0,t.jsxs)("div",{className:"form-group title",children:[(0,t.jsxs)("label",{htmlFor:"postTitle",children:[(0,t.jsx)(n.Envelope,{}),(0,t.jsx)("p",{children:S("postTitle")})]}),(0,t.jsx)("input",{"data-testid":"post-title",id:"postTitle",type:"text",className:O.title?"error":"",placeholder:S("postTitlePlaceholder"),..._("title"),onFocus:()=>x(!0),onBlur:()=>x(!1)}),(0,t.jsxs)("div",{className:"helper "+(O.title?"error":b?"idle":""),children:[(0,t.jsx)(o.Important,{}),(0,t.jsx)("p",{children:O.title?S("lengthLimitSurpassed"):S("maxTitleLength",{max:100})})]})]}),(0,t.jsxs)("div",{className:"form-group",children:[(0,t.jsxs)("label",{htmlFor:"description",children:[(0,t.jsx)(l.Pencil,{}),(0,t.jsx)("p",{children:S("description")})]}),(0,t.jsx)("textarea",{"data-testid":"description",id:"description",className:O.description?"error":"idle",placeholder:S("descriptionPlaceholder"),..._("description"),rows:4,onFocus:()=>j(!0),onBlur:()=>j(!1)}),(0,t.jsxs)("div",{className:"helper "+(O.description?"error":R?"idle":""),children:[(0,t.jsx)(o.Important,{}),(0,t.jsx)("p",{children:O.description?S("lengthLimitSurpassed"):S("maxDescLength",{max:200})})]})]}),(0,t.jsxs)("div",{className:"upload-area",children:[(0,t.jsx)(u.default,{}),(0,t.jsxs)("div",{className:"upload-content",children:[(0,t.jsx)("p",{children:v?`Uploaded file: ${v.name}.`:S("uploadFile")}),(0,t.jsx)("p",{className:"file-types",children:S("fileTypes")})]}),(0,t.jsx)("input",{"data-testid":"file-input",type:"file",accept:".jpg,.png,.pdf",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];if(t.size>0xa00000)return void(0,a.showNotification)(S("fileSizeExceeded"),"error",3e3);if(!["image/jpeg","image/png","application/pdf"].includes(t.type))return void(0,a.showNotification)(S("invalidFileType"),"error",3e3);g(t)}},className:"file-input"})]}),(0,t.jsx)("div",{className:"create-post-container",children:(0,t.jsx)("button",{"data-testid":"create-post-btn",type:"submit",className:"create-btn",children:S("create")})})]})]})})};var y=e.i(57688);let v=({avatar:e,postCreated:a})=>{let{theme:n}=(0,r.useTheme)(),[o,l]=(0,s.useState)(!1),{t:u}=(0,i.useTranslation)();return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{id:"addPost","data-theme":n,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.default,{"data-testid":"user-avatar",className:"avatar",src:e||"/imgs/default-avatar.jpg",width:64,height:64,alt:"User avatar"}),(0,t.jsx)("p",{"data-testid":"whats-happening",children:u("whatsHappening")})]}),(0,t.jsx)("button",{"data-testid":"tell-everyone",onClick:()=>l(!0),children:u("tellEveryone")})]}),o&&(0,t.jsx)(f,{"data-testid":"add-post-form",close:()=>l(!1),postCreated:a})]})};var g=s,b=e.i(19775),x=e.i(72639);let R=async()=>{let e=`
    query {
      allGroups {
        id
        title
        membersCount
        photo
      }
    }
  `;try{return(await m.tokenApi.post("/graphql",{query:e})).data.allGroups}catch(e){return console.error("Error fetching groups:",e),[]}},j=async()=>{try{return await m.tokenApi.get("/getSuggested")}catch(e){return console.error("Error fetching users:",e),[]}};class S extends g.Component{constructor(e){super(e),this.state={groups:[],suggestedUsers:[],loading:!0}}componentDidMount(){Promise.all([R(),j()]).then(([e,t])=>{this.setState({groups:e,suggestedUsers:t,loading:!1})}).catch(e=>{console.error("HTTP error!",e),this.setState({loading:!1})})}render(){let{groups:e,suggestedUsers:s}=this.state,i=this.props.t,a=r.useTheme.getState().theme;return(0,t.jsxs)("aside",{className:b.default.sidebar,"data-theme":a,children:[(0,t.jsxs)("div",{className:b.default.recPeople,children:[(0,t.jsx)("h4",{children:i("sugPeople")}),this.state.loading?(0,t.jsx)("p",{"data-testid":"load-sug-people",children:i("loadSugPeople")}):(0,t.jsx)(t.Fragment,{children:s?.map(e=>(0,t.jsxs)("div",{className:b.default.person,children:[(0,t.jsx)(y.default,{src:e.profileImage||"/imgs/default-avatar.jpg","data-testid":"Person avatar",className:b.default.avatar,alt:"Person avatar",width:48,height:48}),(0,t.jsxs)("div",{className:b.default.personalInfo,children:[(0,t.jsxs)("p",{children:[e.firstName," ",e.secondName]}),(0,t.jsxs)("small",{children:["@",e.username]})]})]},e.id))})]}),(0,t.jsxs)("div",{className:b.default.recCommunities,children:[(0,t.jsx)("h4",{children:i("sugGroups")}),this.state.loading?(0,t.jsx)("p",{"data-testid":"load-sug-groups",children:i("loadSugGroups")}):(0,t.jsx)(t.Fragment,{children:e.map(e=>(0,t.jsxs)("div",{className:b.default.community,children:[(0,t.jsx)(y.default,{src:e.photo,"data-testid":"Community avatar",className:b.default.avatar,alt:"Community avatar",width:48,height:48}),(0,t.jsxs)("div",{className:b.default.communityInfo,children:[(0,t.jsx)("p",{children:e.title}),(0,t.jsxs)("small",{children:[e.membersCount," ",i("members")]})]})]},e.id))})]})]})}}let T=(0,x.default)(S);var _=e.i(66027),I=e.i(55487);let O=s.default.lazy(()=>e.A(12451));function E(){let{user:e,userAuth:r}=(0,I.useSelector)(e=>e.auth),{t:a}=(0,i.useTranslation)(),{data:n=[],refetch:o,isLoading:l}=(0,_.useQuery)({queryKey:["get-posts"],queryFn:async()=>await m.tokenApi.get("/posts")});return(0,t.jsxs)(t.Fragment,{children:[r&&e&&(0,t.jsx)(v,{avatar:e?.profileImage,postCreated:o}),(0,t.jsx)("div",{className:"main-page",children:(0,t.jsxs)("div",{className:"posts",children:[(0,t.jsx)(s.Suspense,{fallback:(0,t.jsx)("p",{children:"Loading posts..."}),children:n.map(s=>(0,t.jsx)(O,{post:s,user:e,userAuth:r,t:a},s.id))}),r&&e&&(0,t.jsx)(T,{})]})})]})}e.s(["default",()=>E],52683)},12451,e=>{e.v(t=>Promise.all(["static/chunks/e0b495ebb64941ad.js","static/chunks/eaf97920566df8f7.js","static/chunks/f463dd94aabcec17.js"].map(t=>e.l(t))).then(()=>t(23903)))}]);