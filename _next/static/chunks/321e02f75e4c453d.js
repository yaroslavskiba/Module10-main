(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,89610,e=>{e.v({error:"style-module__yHROZW__error",notification:"style-module__yHROZW__notification",notificationClose:"style-module__yHROZW__notificationClose",notificationContent:"style-module__yHROZW__notificationContent",notificationIcon:"style-module__yHROZW__notificationIcon",notificationMessage:"style-module__yHROZW__notificationMessage",slideIn:"style-module__yHROZW__slideIn",slideOut:"style-module__yHROZW__slideOut",success:"style-module__yHROZW__success",warning:"style-module__yHROZW__warning"})},45618,e=>{"use strict";var i=e.i(43476),t=e.i(88014),a=e.i(71645),r=e.i(74080),s=e.i(89610);let o=({message:e,type:t,isVisible:o=!1,close:l,autoHide:n})=>{let[d,c]=(0,a.useState)(!1);(0,a.useEffect)(()=>{o&&c(!1)},[o]),(0,a.useEffect)(()=>{if(!o)return;let e=setTimeout(()=>{m()},n);return()=>clearTimeout(e)},[o,d,n]);let m=()=>{d||(c(!0),setTimeout(()=>{l()},300))};if(!o&&!d)return null;let u="success"===t?s.default.success:"error"===t?s.default.error:s.default.warning,p=d?s.default.slideOut:s.default.slideIn,f=(0,i.jsx)("div",{"data-testid":"notification",className:`${s.default.notification} ${u} ${p}`,children:(0,i.jsxs)("div",{className:s.default.notificationContent,children:[(0,i.jsx)("p",{className:s.default.notificationMessage,children:e}),(0,i.jsx)("button",{"data-testid":"close-button",className:s.default.notificationClose,onClick:m,children:"Ã—"})]})}),h=document.getElementById("notification-root");return h?(0,r.createPortal)(f,h):null},l=null,n=null,d=[],c=()=>{let e=(l||((l=document.createElement("div")).id="notification-container",document.getElementById("notification-root")?.appendChild(l)),l);n||(n=(0,t.createRoot)(e)),n.render((0,i.jsx)(i.Fragment,{children:d.map(e=>(0,i.jsx)(o,{message:e.message,type:e.type,isVisible:!0,autoHide:e.autoHide,close:()=>{d=d.filter(i=>i.id!==e.id),c()}},e.id))}))};e.s(["showNotification",0,(e,i,t)=>{let a=Date.now(),r=t+100*d.length;return d.push({id:a,message:e,type:i,autoHide:r}),c(),()=>{d=d.filter(e=>e.id!==a),c()}}],45618)},93016,e=>{"use strict";var i=e.i(10348);e.s(["Important",()=>i.default])},71464,e=>{"use strict";var i=e.i(15849);e.s(["Envelope",()=>i.default])},50326,e=>{"use strict";var i=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(43289),s=e.i(45618);e.i(85269);var o=e.i(22831),l=e.i(53145),n=e.i(54616),d=e.i(55487),c=e.i(93550),m=e.i(99683),u=e.i(80202);e.i(96991);var p=e.i(71464),f=e.i(93016),h=e.i(14463),g=e.i(89260),g=g,x=e.i(99291),j=e.i(57688),v=e.i(34251);e.s(["default",0,()=>{let{theme:e,toggleTheme:N}=(0,r.useTheme)(),{user:y}=(0,d.useSelector)(e=>e.auth),[_,b]=(0,t.useState)(!1),I=(0,d.useDispatch)(),[R,w]=(0,t.useState)(null),[O,P]=(0,t.useState)(y?.profileImage||"./imgs/default-avatar.jpg"),S=(0,a.useRouter)(),{t:C}=(0,o.useTranslation)(),{handleSubmit:E,register:H,reset:T,formState:{errors:U,isSubmitting:W}}=(0,l.useForm)({mode:"onChange",resolver:(0,u.yupResolver)(m.object({username:m.string().required(C("inputUsername")),email:m.string().email(C("inputValidEmail")).required(C("inputEmail")),description:m.string().max(200,C("descSize")).optional(),profileImage:m.string().required(),firstName:m.string().optional(),secondName:m.string().optional()}).required()),defaultValues:{username:y?.username||"",email:y?.email||"",description:y?.description||"",profileImage:y?.profileImage||"/imgs/default-avatar.jpg",firstName:y?.firstName||"",secondName:y?.secondName||""}});(0,t.useEffect)(()=>{if(R){let e=URL.createObjectURL(R);return P(e),()=>URL.revokeObjectURL(e)}y?.profileImage?P(y.profileImage):P("/imgs/default-avatar.jpg")},[R,y?.profileImage]);let F=(0,n.useMutation)({mutationFn:async e=>{let i=`
                mutation UpdateProfile($input: UpdateProfileInput!) {
                    updateProfile(input: $input) {
                        username
                        email
                        description
                        profileImage
                        firstName
                        secondName
                    }
                }
            `;try{return(await x.tokenApi.post("/graphql",{query:i,variables:{input:e}})).data.updateProfile}catch(e){return console.error("Error updating profile:",e),(0,s.showNotification)(C("couldntUpdateProfile"),"error",2e3),[]}},onSuccess:e=>{I((0,c.updateUser)(e)),(0,s.showNotification)(C("updatedProfile"),"success",2e3),T({username:e.username,email:e.email,description:e.description,profileImage:e.profileImage})},onError:()=>{(0,s.showNotification)(C("couldntUpdateProfile"),"error",2e3)}}),Z=async e=>{try{F.mutate({...e,profileImage:y?.profileImage||"/imgs/default-avatar.jpg",firstName:y?.firstName||"",secondName:y?.secondName||""})}catch(e){console.log("Couldnt update profile with error:",e),(0,s.showNotification)(C("couldntUpdateProfile"),"error",3e3)}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"profile","data-theme":e,children:[(0,i.jsxs)("div",{className:"edit-profile",children:[(0,i.jsx)("h1",{children:C("editProfile")}),(0,i.jsxs)("form",{id:"profile-form",onSubmit:E(Z,e=>{Object.values(e).forEach(e=>{e?.message&&(0,s.showNotification)(e.message.toString(),"error",3e3)})}),children:[(0,i.jsxs)("div",{className:"profile-header",children:[(0,i.jsx)(j.default,{src:O,"data-testid":"profile-image-preview",className:"avatar",alt:"Profile",width:64,height:64}),(0,i.jsxs)("div",{className:"profile-info",children:[(0,i.jsxs)("h3",{children:[y?.firstName," ",y?.secondName]}),(0,i.jsx)("label",{htmlFor:"profileImage",className:"change-photo",children:C("changeProfilePhoto")}),(0,i.jsx)("input",{"data-testid":"change-photo",type:"file",id:"profileImage",accept:"image/*",style:{display:"none"},onChange:e=>{let i=e.target.files?.[0];if(i){if(i.size>0xa00000)return void(0,s.showNotification)(C("fileSizeExceeded"),"error",3e3);if(!["image/jpeg","image/png","application/pdf"].includes(i.type))return void(0,s.showNotification)(C("invalidFileType"),"error",3e3);w(i)}}})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("label",{htmlFor:"username",children:[(0,i.jsx)(g.default,{}),(0,i.jsx)("p",{children:C("username")})]}),(0,i.jsx)("input",{"data-testid":"username",type:"text",id:"username",placeholder:"@username123",...H("username")})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("label",{htmlFor:"email",children:[(0,i.jsx)(p.Envelope,{}),(0,i.jsx)("p",{children:C("email")})]}),(0,i.jsx)("input",{"data-testid":"email",type:"email",id:"email",className:U.email?"error":"idle",placeholder:"email@domain.com",...H("email")}),U.email&&(0,i.jsxs)("div",{className:"helper error",children:[(0,i.jsx)(f.Important,{}),(0,i.jsx)("p",{children:C("invalidEmail")})]})]}),(0,i.jsxs)("div",{className:"form-group",children:[(0,i.jsxs)("label",{htmlFor:"description",children:[(0,i.jsx)(h.Pencil,{}),(0,i.jsx)("p",{children:C("description")})]}),(0,i.jsx)("textarea",{"data-testid":"description",id:"description",className:U.description?"error":"idle",placeholder:C("descriptionPlaceholder"),...H("description"),rows:4,onFocus:()=>b(!0),onBlur:()=>b(!1)}),(0,i.jsxs)("div",{className:"helper "+(U.description?"error":_?"idle":""),children:[(0,i.jsx)(f.Important,{}),(0,i.jsx)("p",{children:U.description?C("lengthLimitSurpassed"):C("maxDescLength",{max:200})})]})]}),(0,i.jsx)(v.Button,{"data-testid":"update-profile",type:"submit",sx:{height:44,width:244,bgcolor:"var(--accent)",color:"var(--text-color)",border:"none",padding:"12px 48px",borderRadius:0,textTransform:"none",py:1.5,px:2,marginBottom:20,fontSize:14,fontWeight:400,alignSelf:"flex-start",transition:"0.2s ease-in","&:hover":{bgcolor:"var(--btn-hover)",transition:"0.2s ease-in"}},children:C("saveProfile")})]})]}),(0,i.jsxs)("div",{className:"preferences",children:[(0,i.jsxs)("h2",{children:[" ",C("preferencies")," "]}),(0,i.jsxs)("div",{className:"theme-toggle",children:[(0,i.jsxs)("label",{className:"switch",children:[(0,i.jsx)("input",{"data-testid":"theme-toggle",type:"checkbox",checked:"dark"===e,onChange:N}),(0,i.jsx)("span",{className:"slider"})]}),(0,i.jsx)("p",{children:C("darkTheme")})]}),(0,i.jsx)("h2",{children:C("actions")}),(0,i.jsx)(v.Button,{sx:{height:44,width:144,bgcolor:"var(--accent)",color:"var(--text-color)",border:"none",padding:"12px 48px",borderRadius:0,textTransform:"none",py:1.5,px:2,fontSize:14,fontWeight:400,alignSelf:"flex-start",transition:"0.2s ease-in","&:hover":{bgcolor:"var(--btn-hover)",transition:"0.2s ease-in"}},onClick:()=>{I((0,c.logOut)()),S.push("/")},children:C("logout")})]})]})})}],50326)}]);